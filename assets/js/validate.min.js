function check_email(e,tok){
    var email=e.value;
    var ide=e.name;
    var token=document.getElementById('log_token').value;
   
   // var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
   
        // document.getElementById(ide).style.display="block";
        //  document.getElementById(ide).innerHTML="You Entered Invalid Email Address"
          $.post("index.php/customers/check_email",{
             email:email,'csrfToken':token
         },function(data){
             document.getElementById('log_token').value=tok;
             if(data=="1"){
                  document.getElementById('sublog').disabled=false;
                  document.getElementById(ide).style.display="none";
                 
             }else{
                    document.getElementById('sublog').disabled=true;
                 document.getElementById(ide).style.display="block";
                 document.getElementById(ide).innerHTML="Email is Not Available";
                
             }
         });
         
}


$('#privacy').click(function(){
     if(this.checked) {
    $('#book-appointment-submit').prop('disabled', false);
     }else{
         $('#book-appointment-submit').prop('disabled',true);
     }
});


$('#policy').click(function(){
   
    $('#term_cond').modal({backdrop: 'static', keyboard: false},'show');
});

  $('#fget').click(function(){
   
    $('#forget-pwd').modal('show');
});


$('#fget-email').change(function(){
    var token=$('#token').val();
    var mobile=$('#fget-email').val();
    var err=document.getElementById('error-forget');
    
        $.post("index.php/customers/check_email",{
            
              Mobile:mobile,
             'csrfToken':token
         },function(data){
             if(data=="1"){
                   document.getElementById('fget-passwd').disabled=false;
                    err.style.display="none";
                    document.getElementById('send-otp').disabled=false;
                 
             }else{
                  document.getElementById('fget-passwd').disabled=true;
                err.style.display="block";
                 err.innerHTML="Mobile Number is NOT Available";
                 document.getElementById('send-otp').disabled=true;
             }
         });
});
$('#send-otp').click(function(){
    
    var token=$('#token').val();
    var mobile=$('#fget-email').val();
    $.post("index.php/customers/send_otp",{
        
              Mobile:mobile,
             'csrfToken':token
         },function(data){
    console.log(data);         
    $('#validotp').val(data);
    $('#mobf').css('display','none');
    $('#otpf').css('display','block');
         
             
    });
    
   
    
});
 $('#submit-otp').click(function(){
     var otp=$('#otp').val();
     var validotp=$('#validotp').val();
      var err1=document.getElementById('error-otp');
      if(otp.length > 0){
     if(otp == validotp){
     $('#otpf').css('display','none');
     $('#chf').css('display','block');
      err1.style.display="none";
     }
     else{
        err1.style.display="block";
        err1.innerHTML="Wrong OTP Number";
     }
      }
      else{
           err1.style.display="block";
        err1.innerHTML="Enter OTP Number";
      }
});


$('#change-pwd').click(function(){
     var token=$('#token').val();
    var email=$('#fget-email').val();
    var pwd=$('#fget-passwd').val();
    
    if(email=="" && pwd==""){
          Notiflix.Notify.Warning('All fields are Required');
    }else if(email==""){
          Notiflix.Notify.Warning('Email  field are Required');
    }else if(pwd==""){
         Notiflix.Notify.Warning('Password  field are Required');
    }else{
         $.post("index.php/customers/update_password",{
            
              email:email,
              passwd:pwd,
             'csrfToken':token
         },function(data){
              if(data==1){
                    Notiflix.Notify.Success('Password Changed');
                  $('#fget-email').val('');
                  $('#fget-passwd').val('');
                   $('#forget-pwd').modal('hide');
              }else{
                  
              }
         }); 
    }
       
    
    
    
});

$('#fget-cpasswd').on('keyup',function(){
       var pwd=$('#fget-passwd').val();
       var cpwd=$('#cpasswd').val();
        var ide=document.getElementById('cpwd-error'); 
       if(pwd==cpwd){
             ide.style.display="none";
              document.getElementById('change-pwd').disabled=false;
       }else{
           ide.style.display="block";
           ide.innerHTML="Password Not Matched";
           document.getElementById('change-pwd').disabled=true;
       }
    });
    
 function check_register_email(e,tok){
    var email=e.value;
    var ide=document.getElementById('mail-error');
    var token=document.getElementById('sub-token').value;

          $.post("index.php/customers/check_user_email",{
             email:email,'csrfToken':token
         },function(data){
             document.getElementById('log_token').value=tok;
             console.log(data);
             if(data=="1"){
                   document.getElementById('subreg').disabled=true;
                 ide.style.display="block";
                 ide.innerHTML="Email is Already Available";
             }else{
                 document.getElementById('subreg').disabled=false;
                  ide.style.display="none";
             }
         });
}

 function check_mobile(e,tok){
    var mobile=e.value;
    var ide=document.getElementById('mno-error');
    var token=document.getElementById('sub-token').value;
if(mobile.length == 10){


          $.post("index.php/customers/check_mobile",{
             mobile:mobile,'csrfToken':token
         },function(data){
           
             document.getElementById('log_token').value=tok;
             if(data=="1"){
                   document.getElementById('subreg').disabled=true;
                 ide.style.display="block";
                 ide.innerHTML="Mobile Number is Already Available";
             }else{
                 document.getElementById('subreg').disabled=false;
                  ide.style.display="none";
             }
         });
}
}





  function validate(){
      var name=document.getElementsByName('uname')[0].value;
     var pwd=document.getElementsByName('pwd')[0].value;
     if(name=="" && pwd==""){
         Notiflix.Notify.Warning('All fields are Required');
         event.preventDefault();
     }else if(name==""){
           Notiflix.Notify.Warning('Username field are Required');
         event.preventDefault();
     }else if(pwd==""){
           Notiflix.Notify.Warning('Password field are Required');
         event.preventDefault();
     } 
  }
    
    function validate_register(){
        var fname=document.getElementById('fname').value;
       
        var passwd=document.getElementById('passwd').value;
        var mno=document.getElementById('mobile').value;
        var org=document.getElementById('organization').value;
        if(fname=="" &&   passwd=="" && mno=="" && org==""){
            Notiflix.Notify.Warning('All fields are Required');
             event.preventDefault();
        }else if(mno==""){
             Notiflix.Notify.Warning('Mobile field are Required');
             event.preventDefault();
        }else if(fname==""){
            Notiflix.Notify.Warning('Fname field are Required');
             event.preventDefault();
        }else if(passwd==""){
             Notiflix.Notify.Warning('Password field are Required');
             event.preventDefault();
        }
        else if(org==""){
             Notiflix.Notify.Warning('Organization field are Required');
             event.preventDefault();
        }
        else if(mno.length <= 9){
             Notiflix.Notify.Warning('Mobile Number Maximum 10 Digit');
              event.preventDefault();
        }
       
    }
    
    function checkletter(e){
        e.value=e.value.replace(/[^A-Za-z]/g,'');
    }
    
    function validate_pwd(e){
        var pwd=e.value;
        if(pwd.length > 0){
        var error=document.getElementById('pass');
        var btn=document.getElementById('subreg');
        if(pwd.length < 8){
            error.style.display="block";
            error.innerHTML="Password Minimum 8 Characters";
            btn.disabled=true;
        }else if(pwd.length >=8){
            error.style.display="none";
            btn.disabled=false;
        }
        }
    }



function hidelog(){
    var log=document.getElementById('login-frame');
     var reg=document.getElementById('signup-frame');
    log.style.display="none";
    reg.style.display="block";
}
function hidereg(){
     var log=document.getElementById('login-frame');
     var reg=document.getElementById('signup-frame');
    log.style.display="block";
    reg.style.display="none";
    
}


function get_data(token){
            var mrn=document.getElementById('mrn-search').value;
             if(mrn.length=="0"){
                  Notiflix.Notify.Failure('MRN search Field Required');
             }else{
                     $.post("Appointments/filter_mrn",{
             'csrfToken':token,
             'MRN':mrn
         },function(data){
             
                  if(data=="notnull"){
                      Notiflix.Notify.Failure('Data Not Found');
                      if($('#first-name').val().length > 0){
                          //Notiflix.Notify.Failure('Data Not Found');
                      }else{
                   $('#first-name').val("");
                  $('#last-name').val("");
                  $('#email').val("");
                  $('#phone-number').val("");
                  $('#address').val("");
                  $('#city').val("");
                  $('#zip-code').val("");
                  $('#notes').val("");
                   $('#organization').val(""); 
                      }
                      
                      
                    
                
                   
                     }else{
                     var row=JSON.parse(data);
                  $('#first-name').val(row.first_name);
                  $('#last-name').val(row.MRN);
                  $('#email').val(row.email);
                  $('#phone-number').val(row.phone_number);
                  $('#address').val(row.address);
                  $('#city').val(row.city);
                  $('#zip-code').val(row.zipcode);
                  $('#notes').val(row.notes);
                  $('#organization').val(row.Organization);
              }
          
            });
             }
     
}



